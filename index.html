<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Explorador Armónico Macro</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #0f172a; color: white; }
    .circle { position: relative; width: 500px; height: 500px; margin: auto; }
    .chord {
      position: absolute;
      transform: translate(-50%, -50%);
      transition: transform 0.3s, filter 0.3s;
    }
    .chord:hover {
      transform: translate(-50%, -50%) scale(1.15);
      filter: brightness(1.2);
      z-index: 10;
    }
    .line {
      stroke: #94a3b8;
      stroke-width: 1.5;
      opacity: 0.5;
    }
    .focus circle {
      filter: drop-shadow(0 0 10px white);
    }
  </style>
</head>
<body>
  <div class="text-center py-6">
    <h1 class="text-4xl font-bold mb-2">Mapa Interactivo de Funciones Armónicas</h1>
    <p class="text-lg text-slate-300">Explora las conexiones entre acordes en un círculo macro visual. Haz clic en un acorde para enfocarlo.</p>
  </div>
  <div class="flex justify-center">
    <svg id="network" viewBox="0 0 600 600" width="600" height="600"></svg>
  </div>  <script>
    const svg = document.getElementById("network");
    const center = 300;
    const radius = 220;
    const chords = [
      { name: "C", type: "maj" }, { name: "G", type: "maj" }, { name: "D", type: "maj" },
      { name: "A", type: "maj" }, { name: "E", type: "maj" }, { name: "B", type: "maj" },
      { name: "F#", type: "maj" }, { name: "Db", type: "maj" }, { name: "Ab", type: "maj" },
      { name: "Eb", type: "maj" }, { name: "Bb", type: "maj" }, { name: "F", type: "maj" }
    ];

    const relations = [
      ["C", "G"], ["C", "F"], ["C", "Am"], ["C", "G7"],
      ["G", "D"], ["D", "A"], ["A", "E"], ["E", "B"], ["B", "F#"],
      ["F#", "Db"], ["Db", "Ab"], ["Ab", "Eb"], ["Eb", "Bb"], ["Bb", "F"],
      ["F", "C"]
    ];

    const angleStep = (2 * Math.PI) / chords.length;
    const positions = {};

    chords.forEach((chord, i) => {
      const angle = angleStep * i - Math.PI / 2;
      const x = center + radius * Math.cos(angle);
      const y = center + radius * Math.sin(angle);
      positions[chord.name] = { x, y };

      const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
      g.setAttribute("class", "chord-group");
      g.setAttribute("transform", `translate(${x},${y})`);
      g.innerHTML = `
        <circle r="20" fill="#1e293b" stroke="white" stroke-width="2" />
        <text x="0" y="5" text-anchor="middle" fill="white" font-size="16" font-family="sans-serif">${chord.name}</text>
      `;
      g.style.cursor = "pointer";
      g.onclick = () => enfocar(chord.name);
      svg.appendChild(g);
    });

    relations.forEach(([a, b]) => {
      const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
      line.setAttribute("x1", positions[a].x);
      line.setAttribute("y1", positions[a].y);
      line.setAttribute("x2", positions[b].x);
      line.setAttribute("y2", positions[b].y);
      line.setAttribute("class", "line");
      svg.insertBefore(line, svg.firstChild);
    });

    function enfocar(nombre) {
      const grupos = svg.querySelectorAll(".chord-group");
      grupos.forEach(g => {
        const txt = g.querySelector("text").textContent;
        if (txt === nombre) {
          g.classList.add("focus");
          g.setAttribute("transform", `translate(${positions[nombre].x},${positions[nombre].y}) scale(1.2)`);
        } else {
          g.classList.remove("focus");
          g.setAttribute("transform", `translate(${positions[txt]?.x || 0},${positions[txt]?.y || 0}) scale(0.8)`);
        }
      });
    }
  </script></body>
</html>
