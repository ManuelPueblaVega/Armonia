<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Explorador Armónico</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .note { transition: transform 0.2s; }
    .note:hover { transform: scale(1.1); cursor: pointer; }
    .tónica { background-color: #4ade80; }
    .subdominante { background-color: #60a5fa; }
    .dominante { background-color: #f87171; }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="max-w-4xl mx-auto p-4">
    <header class="text-center mb-6">
      <h1 class="text-4xl font-bold">Explorador Armónico</h1>
      <p class="mt-2 text-lg">Visualiza y escucha cómo los acordes se conectan y transforman dentro del círculo de quintas.</p>
    </header><!-- Círculo de quintas interactivo -->
<section class="bg-white shadow p-4 rounded mb-6">
  <h2 class="text-2xl font-semibold mb-2">1. Círculo de Quintas Interactivo</h2>
  <p class="mb-2 text-gray-700">Haz clic en una tonalidad para descubrir sus funciones armónicas. Cada acorde es como un personaje en una historia musical: <strong>la tónica</strong> es el hogar, <strong>la subdominante</strong> es el viaje, y <strong>la dominante</strong> es la tensión antes de regresar.</p>
  <div id="circle" class="flex flex-wrap justify-center gap-2"></div>
</section>

<!-- Visualización en Teclado -->
<section class="bg-white shadow p-4 rounded mb-6">
  <h2 class="text-2xl font-semibold mb-2">2. Visualización de Funciones Armónicas</h2>
  <p class="mb-4 text-gray-700">Haz clic sobre un acorde para escucharlo y entender su papel dentro de la tonalidad. Colores: <span class="font-bold text-green-600">Tónica (descanso)</span>, <span class="font-bold text-blue-600">Subdominante (transición)</span>, <span class="font-bold text-red-600">Dominante (tensión)</span>.</p>
  <div id="keyboard" class="flex gap-2 flex-wrap justify-center"></div>
</section>

  </div>  <script>
    const tonalidades = ['C', 'G', 'D', 'A', 'E', 'B', 'F#', 'Db', 'Ab', 'Eb', 'Bb', 'F'];
    const funciones = {
      'C': { tónica: 'C', subdominante: 'F', dominante: 'G' },
      'G': { tónica: 'G', subdominante: 'C', dominante: 'D' },
      'D': { tónica: 'D', subdominante: 'G', dominante: 'A' },
      'A': { tónica: 'A', subdominante: 'D', dominante: 'E' },
      'E': { tónica: 'E', subdominante: 'A', dominante: 'B' },
      'B': { tónica: 'B', subdominante: 'E', dominante: 'F#' },
      'F#': { tónica: 'F#', subdominante: 'B', dominante: 'C#' },
      'Db': { tónica: 'Db', subdominante: 'Gb', dominante: 'Ab' },
      'Ab': { tónica: 'Ab', subdominante: 'Db', dominante: 'Eb' },
      'Eb': { tónica: 'Eb', subdominante: 'Ab', dominante: 'Bb' },
      'Bb': { tónica: 'Bb', subdominante: 'Eb', dominante: 'F' },
      'F': { tónica: 'F', subdominante: 'Bb', dominante: 'C' }
    };

    const notasFrecuencia = {
      'C': 261.63, 'C#': 277.18, 'Db': 277.18, 'D': 293.66, 'Eb': 311.13, 'E': 329.63,
      'F': 349.23, 'F#': 369.99, 'Gb': 369.99, 'G': 392.00, 'Ab': 415.30,
      'A': 440.00, 'Bb': 466.16, 'B': 493.88
    };

    tonalidades.forEach(tone => {
      const btn = document.createElement('button');
      btn.textContent = tone;
      btn.className = 'note p-3 rounded-full shadow bg-yellow-100 text-lg font-bold';
      btn.onclick = () => mostrarFuncion(tone);
      document.getElementById('circle').appendChild(btn);
    });

    function mostrarFuncion(tone) {
      const keyboard = document.getElementById('keyboard');
      keyboard.innerHTML = '';
      const f = funciones[tone];
      if (!f) return;

      Object.entries(f).forEach(([fn, nota]) => {
        const div = document.createElement('div');
        div.textContent = `${nota} (${fn})`;
        div.className = fn + ' px-4 py-2 rounded text-white shadow text-lg hover:scale-105 cursor-pointer';
        div.onclick = () => reproducirNota(nota);
        keyboard.appendChild(div);
      });
    }

    function reproducirNota(nota) {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = 'sine';
      o.frequency.value = notasFrecuencia[nota] || 440;
      o.connect(g);
      g.connect(ctx.destination);
      o.start();
      g.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime + 1);
      o.stop(ctx.currentTime + 1);
    }
  </script></body>
</html>
